### YamlMime:PowershellCmdlet
summary: |-
  Sets the enabled state for inbox and RADIUS accounting for both external RADIUS and Windows accounting and configures the settings when enabled.
module: RemoteAccess
notes: ""
inputs:
- name: <xref href="None" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Management.Infrastructure.CimInstance#RemoteAccessAccounting" data-throw-if-not-resolved="False" />
  description: |-
    The `Microsoft.Management.Infrastructure.CimInstance` object is a wrapper class that displays Windows Management Instrumentation (WMI) objects.
    The path after the pound sign (`#`) provides the namespace and class name for the underlying WMI object.

    The RemoteAccessAccounting object consists of the following properties: 

     -- The status of RADIUS accounting (Disabled, Windows, or ExternalRadius) and the list of RADIUS servers in the case of ExternalRadius accounting.
    If there is no external radius accounting enabled, then the list of Radius servers is empty. 

     -- The status of inbox accounting (Enabled or Disabled) and the associated properties. 

     -- Time span of the store. 

     -- Number of used bytes. 

     -- Percentage of used bytes. 

     -- Number of free bytes. 

     -- Percentage of free bytes. 

     -- Time stamp of the first record in the database. 

     -- Time stamp of the last record in the database.
links:
- text: Add-RemoteAccessRadius
  href: ./Add-RemoteAccessRadius.yml
- text: Get-RemoteAccessAccounting
  href: ./Get-RemoteAccessAccounting.yml
- text: Set-RemoteAccessInboxAccountingStore
  href: ./Set-RemoteAccessInboxAccountingStore.yml
syntaxes:
- >-
  Set-RemoteAccessAccounting [-EnableAccountingType] <String> [-AccountingOnOffMsg <String>] [-AsJob]

   [-CimSession <CimSession[]>] [-ComputerName <String>] [-PassThru] [-RadiusPort <UInt16>] [-RadiusScore <Byte>]

   [-RadiusServer <String>] [-RadiusTimeout <UInt32>] [-SharedSecret <String>] [-ThrottleLimit <Int32>]

   [-Confirm] [-WhatIf]
- >-
  Set-RemoteAccessAccounting [-AsJob] [-CimSession <CimSession[]>] [-ComputerName <String>] [-PassThru]

   [-ThrottleLimit <Int32>] -DisableAccountingType <String> [-Confirm] [-WhatIf]
examples:
- title: EXAMPLE 1
  code: |-
    PS C:\>Set-RemoteAccessAccounting -EnableAccountingType Inbox -ComputerName edge2 -PassThru
    WARNING-GPO updates cannot be applied to edge2.corp.contoso.com. Changes will not take effect until the next policy refresh. 
    RadiusAccountingStatus          : Disabled 
    RemoteRadiusServerList          : 
    InboxAccountingStatus           : Enabled 
    InboxStoreLimit                 : 12m 
    InboxStoreUsedBytes             : 0 
    InboxStoreUsedBytesInPercentage : 0 
    InboxStoreFreeBytes             : 4282318848 
    InboxStoreFreeBytesInPercentage : 99.7055053710938 
    InboxStoreFirstRecordDate       : 12/17/2011 6:53:24 PM 
    InboxStoreLastRecordDate        : 12/17/2011 6:53:24 PM 

    The accounting store is configured to retain data for up to 2 years.
    PS C:\>Set-RemoteAccessInboxAccountingStore -StoreLimit 2y
  description: |-
    This example enables inbox accounting for this deployment.
    The RA server on which this cmdlet is run is specified using the **ComputerName** parameter.
  summary: ""
- title: EXAMPLE 2
  code: |-
    PS C:\>Set-RemoteAccessAccounting -EnableAccountingType ExternalRadius -RadiusServer radius1.corp.contoso.com -RadiusTimeout 5 -SharedSecret s3cr3t -RadiusPort 1813 -RadiusScore 30
    RadiusAccountingStatus          : ExternalRadius 
    RemoteRadiusServerList          : {radius1.corp.contoso.com} 
    InboxAccountingStatus           : Enabled 
    InboxStoreLimit                 : 12m 
    InboxStoreUsedBytes             : 0 
    InboxStoreUsedBytesInPercentage : 0 
    InboxStoreFreeBytes             : 4282318848 
    InboxStoreFreeBytesInPercentage : 99.7055053710938 
    InboxStoreFirstRecordDate       : 12/17/2011 6:53:24 PM 
    InboxStoreLastRecordDate        : 12/17/2011 6:53:24 PM
  description: |-
    This example configures RA to use RADIUS accounting with configuration parameters.
  summary: ""
- title: EXAMPLE 3
  code: |-
    PS C:\>Set-RemoteAccessAccounting -DisableAccountingType ExternalRadius
    RadiusAccountingStatus          : Disabled 
    RemoteRadiusServerList          : 
    InboxAccountingStatus           : Enabled 
    InboxStoreLimit                 : 12m 
    InboxStoreUsedBytes             : 0 
    InboxStoreUsedBytesInPercentage : 0 
    InboxStoreFreeBytes             : 4282318848 
    InboxStoreFreeBytesInPercentage : 99.7055053710938 
    InboxStoreFirstRecordDate       : 12/17/2011 6:53:24 PM 
    InboxStoreLastRecordDate        : 12/17/2011 6:53:24 PM
  description: |-
    This example disables RADIUS accounting while still retaining inbox accounting.
  summary: ""
parameters:
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: AccountingOnOffMsg
  description: |+
    Specifies the enabled state for the sending of accounting on and off messages.
    The acceptable values for this parameter are:

     -- Enabled. 

     -- Disabled. 

    The default value is Disabled.

  defaultValue: Disable
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: AsJob
  description: |+
    ps_cimcommon_asjob

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="CimSession" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: CimSession
  description: |+
    Runs the cmdlet in a remote session or on a remote computer.
    Enter a computer name or a session object, such as the output of a New-CimSessionhttp://go.microsoft.com/fwlink/p/?LinkId=227967 or Get-CimSessionhttp://go.microsoft.com/fwlink/p/?LinkId=227966 cmdlet.
    The default is the current session on the local computer.

  defaultValue: None
  position: Named
  aliases: Session
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: ComputerName
  description: |+
    Specifies the IPv4 or IPv6 address, or host name, of the computer on which the RA server computer specific tasks should be run.

  defaultValue: None
  position: Named
  aliases: Cn
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before running the cmdlet.

  defaultValue: "False"
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: DisableAccountingType
  isRequired: true
  description: |+
    Indicates the accounting type that has to be disabled.
    The acceptable values for this parameter are:

     -- Inbox. 

     -- ExternalRadius.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: EnableAccountingType
  isRequired: true
  description: |+
    Indicates the accounting type that needs to be enabled.
    The acceptable values for this parameter are:

     -- Inbox: The store size is set to 12 months automatically.
    The Set-RemoteAccessInboxAccountingStore cmdlet is used to change the store size on individual RA servers. 

     -- ExternalRadius: Can also be used to enable Windows Accounting or Accounting on the NPS installed locally on the same computer.

  defaultValue: None
  pipelineInput: true
  position: "2"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: PassThru
  description: |+
    Returns an object representing the item with which you are working.
    By default, this cmdlet does not generate any output.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="UInt16" data-throw-if-not-resolved="False" />
  name: RadiusPort
  description: |+
    Specifies the port number on which the RADIUS server is accepting authentication requests. 

    The default value is 1813. 

    This parameter can be configured only if the **EnableAccountingType** parameter is specified to be ExternalRadius.

  defaultValue: "1813"
  pipelineInput: true
  position: Named
  aliases: Port
  parameterValueGroup: ""
- type: <xref href="Byte" data-throw-if-not-resolved="False" />
  name: RadiusScore
  description: |+
    Specifies the initial score. 

    The default value is 30. 

    This parameter can be configured only if the **EnableAccountingType** parameter is specified to be ExternalRadius.

  defaultValue: "30"
  pipelineInput: true
  position: Named
  aliases: Score
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: RadiusServer
  description: |+
    Specifies the IPv4 or IPv6 address, or host name, of the external RADIUS server that is used for accounting.
    This parameter can be configured only if the **EnableAccountingType** parameter is specified to be ExternalRadius.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ServerName
  parameterValueGroup: ""
- type: <xref href="UInt32" data-throw-if-not-resolved="False" />
  name: RadiusTimeout
  description: |+
    The time out value is specified in seconds. 

    The default value is 5 seconds.
    This parameter can be configured only if the **EnableAccountingType** parameter is specified to be ExternalRadius.

  defaultValue: "5"
  pipelineInput: true
  position: Named
  aliases: Timeout
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: SharedSecret
  description: |+
    Specifies the shared secret between the RA server and the specified external RADIUS server which is required for successful communication between the two servers. 
    Note: The secret is specified in clear text.
    This parameter can be configured only if the **EnableAccountingType** parameter is specified to be ExternalRadius.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Int32" data-throw-if-not-resolved="False" />
  name: ThrottleLimit
  description: |+
    Specifies the maximum number of concurrent operations that can be established to run the cmdlet.
    If this parameter is omitted or a value of `0` is entered, then Windows PowerShellÂ® calculates an optimum throttle limit for the cmdlet based on the number of CIM cmdlets that are running on the computer.
    The throttle limit applies only to the current cmdlet, not to the session or to the computer.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Shows what would happen if the cmdlet runs.
    The cmdlet is not run.

  defaultValue: "False"
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: RemoteAccess.Set-RemoteAccessAccounting
name: Set-RemoteAccessAccounting
description: |-
  The **Set-RemoteAccessAccounting** cmdlet sets the enabled state for inbox and RADIUS accounting for both external RADIUS and Windows accounting and configures the settings when enabled.

  The accounting configuration is globally applicable, such as if a particular kind of accounting is Enabled or Disabled, then that particular kind of accounting is Enabled or Disabled on all Remote Access (RA) servers in the corporate network.
  The associated configuration is also applicable for all of the corporate network. 

   -- All RA servers have the same configured accounting RADIUS servers. 

   -- The default limit set for the inbox accounting store size is the same on all RA servers.

  Therefore, this cmdlet is not impacted by a multi-site deployment.

  Both inbox accounting and RADIUS accounting can be active at the same time.
  RADIUS accounting includes Windows accounting, external RADIUS accounting and accounting on the local Network Policy Server (NPS), but only one type of accounting can be active at any time.
  The **RadiusServer**, **SharedSecret**, **RadiusPort**, **RadiusScore**, **RadiusTimeout**, and **AccountingOnOffMsg** parameters are applicable only when RADIUS accounting is Enabled and cannot be specified when inbox accounting is Enabled.

  The following is the behavior associated with enabling External RADIUS accounting. 

   -- If there is a VPN deployment with accounting enabled and if DirectAccess (DA) is installed on the same RA server then accounting is automatically enabled for DA also and the configuration remains unchanged.
  Note: If Windows Accounting is enabled for VPN, then it will not work for DA as this is not a supported configuration for DA.
  For accounting to work for DA in this scenario either NPS needs to be installed locally or an external RADIUS server needs to be configured for accounting.
  The external radius server can be added using the Add-RemoteAccessRadius cmdlet. 

   -- If user does not specify a RADIUS server then this cmdlet automatically configures Windows accounting: Note: In this scenario, for accounting to work for DA, NPS needs to be installed on the RA server.

  Switching from Windows Accounting to external RADIUS accounting and switching from external RADIUS accounting to Windows Accounting. 

   -- If the current configuration is Windows accounting a user can switch to external RADIUS accounting by doing one of the following: 

   ---- Run the same cmdlet to enable RADIUS accounting and specify an external RADIUS server 

   ---- Add an external RADIUS server using the Add-RemoteAccessRadius cmdlet.
  This enables RADIUS accounting without running this cmdlet. 

   -- A user can switch back to Windows accounting by deleting all the configured external RADIUS servers.
metadata:
  external help file: UnifiedRA_Cmdlets.xml
  Module Name: RemoteAccess
  online version: https://docs.microsoft.com/powershell/module/remoteaccess/set-remoteaccessaccounting?view=windowsserver2012-ps&wt.mc_id=ps-gethelp
  schema: 2.0.0
