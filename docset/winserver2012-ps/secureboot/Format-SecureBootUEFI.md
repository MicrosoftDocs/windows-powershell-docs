---
external help file: Microsoft.SecureBoot.Commands.dll-Help.xml
Module Name: SecureBoot
online version: https://docs.microsoft.com/powershell/module/secureboot/format-securebootuefi?view=windowsserver2012-ps&wt.mc_id=ps-gethelp
schema: 2.0.0
---

# Format-SecureBootUEFI

## SYNOPSIS
Formats certificates or hashes into a content object that is returned and creates a file that is ready to be signed.

## SYNTAX

### FormatForCertificates
```
Format-SecureBootUEFI -Name <String> -SignatureOwner <Guid> -CertificateFilePath <String[]> [-FormatWithCert]
 [-SignableFilePath <String>] [-Time <String>] [-AppendWrite] [-ContentFilePath <String>] [<CommonParameters>]
```

### FormatForHashes
```
Format-SecureBootUEFI -Name <String> -SignatureOwner <Guid> -Hash <String[]> -Algorithm <String>
 [-SignableFilePath <String>] [-Time <String>] [-AppendWrite] [-ContentFilePath <String>] [<CommonParameters>]
```

### FormatForDelete
```
Format-SecureBootUEFI -Name <String> [-Delete] [-SignableFilePath <String>] [-Time <String>]
 [<CommonParameters>]
```

## DESCRIPTION
The **Format-SecureBootUEFI** cmdlet receives certificates or hashes as input and formats the input into a content object that is returned.
This returned object will be used by the Set-SecureBootUEFI cmdlet for actually updating the variable.
If a signable file is specified, then this cmdlet creates a file with the specified name that needs to be signed.

This cmdlet will run on both UEFI and BIOS (non-UEFI) computers.

## EXAMPLES

### EXAMPLE 1
```
PS C:\> Format-SecureBootUefi -Name PK -SignatureOwner 12345678-1234-1234-1234-123456789abc -CertificateFilePath PK.cer -SignableFilePath GeneratedFileToSign.bin -Time 2011-11-01T13:30:00Z | Format-List
Name        : PK 
Time        : 2011-11-01T13:30:00Z 
AppendWrite : False 
Content     : {232, 102, 87, 60...}
```

This example formats the private key in PK.cer being piped into the Set-SecureBootUEFI cmdlet.

### EXAMPLE 2
```
PS C:\> Format-SecureBootUEFI -Name DBX -SignatureOwner 12345678-1234-1234-1234-123456789abc -Algorithm SHA256 -Hash 0011223344556677889900112233445566778899001122334455667788990011 -SignableFilePath GeneratedFileToSign.bin -Time 2011-11-01T13:30:00Z -AppendWrite | Format-List
Name        : dbx 
Time        : 2011-11-01T13:30:00Z 
AppendWrite : True 
Content     : {18, 165, 108, 130...}
```

This example formats the hash being appended to the DBX UEFI variable when piped into the Set-SecureBootUEFI cmdlet.

### EXAMPLE 3
```
PS C:\> Format-SecureBootUEFI -Name KEK -Delete -SignableFilePath GeneratedFileToSign.bin -Time 2011-11-01T13:30:00Z | Format-List
Name        : KEK 
Time        : 2011-11-01T13:30:00Z 
AppendWrite : False 
Content     :
```

This example formats the KEK UEFI variable being deleted when piped into the Set-SecureBootUEFI cmdlet.

## PARAMETERS

### -Algorithm
Specifies, if this cmdlet is formatting hashes, which algorithm is being used.
The acceptable values for this parameter are: SHA1, SHA256, SHA384, or SHA512.

```yaml
Type: String
Parameter Sets: FormatForHashes
Aliases: alg
Accepted values: sha1, sha256, sha384, sha512

Required: True
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -AppendWrite
Indicates that the contents of the current variable is appended instead of overwritten.

```yaml
Type: SwitchParameter
Parameter Sets: FormatForCertificates, FormatForHashes
Aliases: append

Required: False
Position: Named
Default value: False
Accept pipeline input: False
Accept wildcard characters: False
```

### -CertificateFilePath
Specifies a list of one or more files each containing a certificate that is used to generate the content object. 

If only the name is specified, then the file must be in the current working directory; otherwise the full path of the file must be specified.

```yaml
Type: String[]
Parameter Sets: FormatForCertificates
Aliases: c

Required: True
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -ContentFilePath
Specifies the name of the file that is created and contains the information for the content object that is generated by this cmdlet.

```yaml
Type: String
Parameter Sets: FormatForCertificates, FormatForHashes
Aliases: f

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -Delete
Indicates that the content object, as well as the appropriate sign-able file, is created that deletes the variable.

```yaml
Type: SwitchParameter
Parameter Sets: FormatForDelete
Aliases: del

Required: True
Position: Named
Default value: False
Accept pipeline input: False
Accept wildcard characters: False
```

### -FormatWithCert
Indicates whether the certificate will be stored or just the public key.
If this parameter is set, then the entire certificate is stored in the content object.

```yaml
Type: SwitchParameter
Parameter Sets: FormatForCertificates
Aliases: cert

Required: False
Position: Named
Default value: False
Accept pipeline input: False
Accept wildcard characters: False
```

### -Hash
Specifies a list of hashes that are used to generate the content.

```yaml
Type: String[]
Parameter Sets: FormatForHashes
Aliases: h

Required: True
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -Name
Specifies the name of the UEFI environment variable.
The acceptable values for this parameter are: PK, KEK, DB, or DBX.

```yaml
Type: String
Parameter Sets: (All)
Aliases: n
Accepted values: PK, KEK, db, dbx

Required: True
Position: Named
Default value: None
Accept pipeline input: True (ByValue)
Accept wildcard characters: False
```

### -SignableFilePath
Specifies the file that contains the contents of the data that is ready to be signed. 

If only the name is specified, then the file must be in the current working directory; otherwise the full path of the file must be specified.

```yaml
Type: String
Parameter Sets: (All)
Aliases: s

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -SignatureOwner
Specifies  the GUID of the signature owner.

```yaml
Type: Guid
Parameter Sets: FormatForCertificates, FormatForHashes
Aliases: g

Required: True
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -Time
Specifies the timestamp that is used in the signature.
This parameter value should be formatted as follows so that it will be accepted by the DateTime object.
`"2011-11-01T13:30:00Z"`

```yaml
Type: String
Parameter Sets: (All)
Aliases: t

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### CommonParameters
This cmdlet supports the common parameters: -Debug, -ErrorAction, -ErrorVariable, -InformationAction, -InformationVariable, -OutVariable, -OutBuffer, -PipelineVariable, -Verbose, -WarningAction, and -WarningVariable. For more information, see about_CommonParameters (http://go.microsoft.com/fwlink/?LinkID=113216).

## INPUTS

### System.String
The String object represents the UEFI variable name that may be output from the Get-SecureBootUEFI cmdlet.

## OUTPUTS

### Microsoft.SecureBoot.Commands.UEFIFormattedVariable
The UEFIFormattedVariable object contains information about the package that is built up to be set.
The following members are part of the UEFIFormattedVariable object. 

 -- A string named Name. 

 -- A string named Time. 

 -- A boolean named AppendWrite. 

 -- An array of bytes named Content. 

The UEFIFormattedVariable object can be used to pipe into the Set-SecureBootUEFIcmdlet.

## NOTES

## RELATED LINKS

[Confirm-SecureBootUEFI](./Confirm-SecureBootUEFI.md)

[Get-SecureBootPolicy](./Get-SecureBootPolicy.md)

[Get-SecureBootUEFI](./Get-SecureBootUEFI.md)

[Set-SecureBootUEFI](./Set-SecureBootUEFI.md)

