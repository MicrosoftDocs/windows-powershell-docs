### YamlMime:PowershellCmdlet
summary: |-
  Performs a scan of cluster nodes for applicable updates and returns a list of the initial set of updates that would be applied to each node in a specified cluster.
module: ClusterAwareUpdating
notes: ""
inputs:
- name: <xref href="None" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.ClusterAwareUpdating.CauUpdateInfo" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Invoke-CauRun
  href: ./Invoke-CauRun.yml
syntaxes:
- >-
  Invoke-CauScan [[-ClusterName] <String>] [[-CauPluginName] <String[]>] [[-Credential] <PSCredential>]

   [-CauPluginArguments <Hashtable[]>] [-RunPluginsSerially] [-StopOnPluginFailure] [<CommonParameters>]
examples:
- title: EXAMPLE 1
  code: |-
    PS C:\> Invoke-CauScan -ClusterName CONTOSO-FC1 -CauPluginName Microsoft.WindowsUpdatePlugin -Verbose
  description: |-
    This example provides a detailed list of the initial set of updates that would currently be applied to each node in the cluster named CONTOSO-FC1.
    The list is based on the updates that would be applied by the Microsoft.WindowsUpdatePlugin plug-in, which is the default plug-in.
    Note that the preview list includes only an initial set of updates, and does not include updates that might become applicable only after the initial updates are installed.
  summary: ""
- title: EXAMPLE 2
  code: |-
    PS C:\>$secpasswd = ConvertTo-SecureString "PlainTextPassword" -AsPlainText -Force
    PS C:\>$cred = New-Object System.Management.Automation.PSCredential ("username", $secpasswd)
    PS C:\>Invoke-CauScan -ClusterName CONTOSO-FC1 -CauPluginName Microsoft.WindowsUpdatePlugin, Microsoft.HotfixPlugin -CauPluginArguments @{'QueryString'="IsInstalled=0 and Type='Software' and IsHidden=0"},@{'HotfixRootFolderPath' = '\\CauHotfixSrv\shareName'} -Credential $cred
  description: |-
    This example provides a detailed list of the initial set of updates that would currently be applied to each node in the cluster named CONTOSO-FC1.
    The list is based on the updates that would be applied by the Microsoft.WindowsUpdatePlugin plug-in, using a specified query string, and the Microsoft.HotfixPlugin, after the necessary hotfixes and the hotfix configuration file have been downloaded to \\\\CauHotfixSrv\shareName.
    This example also shows how to pass the administrative credentials for cluster CONTOSO-FC1 to the cmdlet.
  summary: ""
parameters:
- type: <xref href="Hashtable" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: CauPluginArguments
  description: |+
    Passes a set of name=value pairs (arguments) for each updating plug-in to use.
    For example, to specify a Domain argument for one plug-in: 

     - `@{Domain=Domain.local}`

    You can specify multiple pairs in a set separated with semicolons.
    For example: 

     - `@{name1=value1;name2=value2;name3=value3}`

    These name=value pairs must be meaningful to the **CauPluginName** that you specify. 

    If you specify arguments for more than one plug-in, provide the sets of name=value pairs in the order that you pass values in **CauPluginName**, separated by commas.
    For example: 

     - `@{name1=value1;name2=value2;name3=value3},@{name4=value4;name5=value5}`


    For the default **Microsoft.WindowsUpdatePlugin** plug-in, no arguments are needed.
    The following arguments are optional: 

     - **'IncludeRecommendedUpdates'='\<Value\>'**: Boolean value to indicate that recommended updates will be applied in addition to important updates on each node.
    If not specified, the default value is **'False'**. 

     - A standard Windows Update Agent query string that specifies criteria used by the Windows Update Agent to filter the updates that will be applied to each node.
    For a name, use **QueryString** and for a value, enclose the full query in quotation marks. 

    If not specified, then the **Microsoft.WindowsUpdatePlugin** plug-in by default uses the following argument:

     - `QueryString="IsInstalled=0 and Type='Software' and IsHidden=0 and IsAssigned=1"`

    For more information about query strings for the default **Microsoft.WindowsUpdatePlugin** plug-in and the criteria such as IsInstalled that can be included in the query strings, see the topic about search criteria in the Windows Update Agent (WUA) API Referencehttp://go.microsoft.com/fwlink/p/?LinkId=223304. 


    For the **Microsoft.HotfixPlugin** plug-in.
    the following argument is required: 

     - **HotfixRootFolderPath=\<Path\>**: The UNC path to a hotfix root folder in an SMB share with a structure that contains the updates to apply and that contains the hotfix configuration file


    The following arguments are optional for the **Microsoft.HotfixPlugin** plug-in: 

     - **RequireSmbEncryption=\<Value\>**: Boolean value to indicate that SMB Encryption will be enforced for accessing data from the SMB share.
    If not specified, the default value is **'False'**.
    To ensure the integrity of the data accessed from the SMB share, the plug-in requires that the share is enabled for either SMB signing or SMB Encryption. 

     - **DisableAclChecks=\<Value\>**: Boolean value to indicate that the plug-in will check for sufficient permissions on the hotfix root folder and the hotfix configuration file.
    If not specified, the default value is **'False'**. 

     - **HotfixInstallerTimeoutMinutes=\<Integer\>**: The length of time in minutes that the plug-in allows the hotfix installer process to return.
    If not specified, the default value is 30 minutes. 

     - **HotfixConfigFileName=\<name\>**: Name for the hotfix configuration file.
    If not specified, the default name DefaultHotfixConfig.xml is used. 


    For more information about required and optional arguments for the **Microsoft.HotfixPlugin** plug-in, see the content about Cluster-Aware Updating plug-inshttp://go.microsoft.com/fwlink/p/?LinkId=235333.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: CauPluginName
  description: |+
    Specifies one or more plug-ins to use when performing scans.
    You can specify multiple values separated with commas.
    The default is the Microsoft.WindowsUpdatePlugin plug-in.
    This plug-in coordinates the Windows Update Agent software resident on each cluster node, the same software that is used when updates are downloaded from Windows Update or Microsoft Update, or from a Windows Server Update Services (WSUS) server.
    For more information about how plug-ins work with CAU, see the content about Cluster-Aware Updating plug-inshttp://go.microsoft.com/fwlink/p/?LinkId=235333.

  defaultValue: None
  position: "1"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: ClusterName
  description: |+
    Specifies the name of the cluster which should be scanned for applicable updates.
    This parameter is only required when this cmdlet is not run on a failover cluster node, or this cmdlet is used to reference a failover cluster different from where the cmdlet is run.

  defaultValue: None
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="PSCredential" data-throw-if-not-resolved="False" />
  name: Credential
  description: |+
    Specifies the administrative credentials for the target cluster.

  defaultValue: None
  position: "2"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: RunPluginsSerially
  description: |+
    When multiple plug-ins are used during a scan for updates, specifies that CAU will scan each cluster node for applicable updates and stage the updates for each plug-in in the plug-in order passed in **CauPluginName**.
    By default, CAU scans and stages the applicable updates for all plug-ins in parallel. 
    **Note:** The parameter is valid only when multiple plug-ins are specified in **CauPluginName**.
    If a single plug-in is specified, a warning appears.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: StopOnPluginFailure
  description: |+
    When multiple plug-ins are used during a scan for updates, specifies that if a failure occurs during a scan on a node by any plug-in, subsequent scans on the node that are coordinated by the remaining plug-ins are stopped.
    By default, a failure by one plug-in does not affect the scans for updates on a node by other plug-ins. 
    **Note:** The parameter is valid only when multiple plug-ins are specified in **CauPluginName**.
    If a single plug-in is specified, a warning appears.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: ClusterAwareUpdating.Invoke-CauScan
name: Invoke-CauScan
description: |-
  The **Invoke-CauScan** cmdlet performs a scan of cluster nodes for applicable updates and returns a list of the initial set of updates that would be applied to each node in a specified cluster.
  Generating the list might take a few minutes.

  Note: The preview list includes only an initial set of updates.
  The list does not include updates that might become applicable only after the initial updates are installed.

  Note: If the **Microsoft.HotfixPlugin** plug-in is specified, the scan returns only the list of hotfix files that are discovered on the hotfix file share.
metadata:
  external help file: ClusterAwareUpdating.dll-Help.xml
  Module Name: ClusterAwareUpdating
  ms.date: 10/30/2017
  online version: https://docs.microsoft.com/powershell/module/clusterawareupdating/invoke-causcan?view=windowsserver2012r2-ps&wt.mc_id=ps-gethelp
  schema: 2.0.0
  title: Invoke-CauScan
