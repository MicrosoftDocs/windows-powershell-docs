### YamlMime:PowershellCmdlet
summary: |-
  Creates an iSCSI virtual disk with the specified file path and size.
module: IscsiTarget
notes: ""
inputs:
- name: <xref href="None" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Iscsi.Target.Commands.IscsiVirtualDisk" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Checkpoint-IscsiVirtualDisk
  href: ./Checkpoint-IscsiVirtualDisk.yml
- text: Convert-IscsiVirtualDisk
  href: ./Convert-IscsiVirtualDisk.yml
- text: Get-IscsiVirtualDisk
  href: ./Get-IscsiVirtualDisk.yml
- text: Import-IscsiVirtualDisk
  href: ./Import-IscsiVirtualDisk.yml
- text: Remove-IscsiVirtualDisk
  href: ./Remove-IscsiVirtualDisk.yml
- text: Restore-IscsiVirtualDisk
  href: ./Restore-IscsiVirtualDisk.yml
- text: Set-IscsiVirtualDisk
  href: ./Set-IscsiVirtualDisk.yml
syntaxes:
- >-
  New-IscsiVirtualDisk [-Description <String>] [-Path] <String> [-SizeBytes] <UInt64>

   [-LogicalSectorSizeBytes <UInt32>] [-PhysicalSectorSizeBytes <UInt32>] [-BlockSizeBytes <UInt32>]

   [-ComputerName <String>] [-Credential <PSCredential>] [<CommonParameters>]
- >-
  New-IscsiVirtualDisk [-Description <String>] -ParentPath <String> [-Path] <String> [[-SizeBytes] <UInt64>]

   [-PhysicalSectorSizeBytes <UInt32>] [-BlockSizeBytes <UInt32>] [-ComputerName <String>]

   [-Credential <PSCredential>] [<CommonParameters>]
- >-
  New-IscsiVirtualDisk [-Description <String>] [-Path] <String> [-SizeBytes] <UInt64> [-DoNotClearData]

   [-UseFixed] [-LogicalSectorSizeBytes <UInt32>] [-PhysicalSectorSizeBytes <UInt32>] [-BlockSizeBytes <UInt32>]

   [-ComputerName <String>] [-Credential <PSCredential>] [<CommonParameters>]
examples:
- title: EXAMPLE 1
  code: |-
    PS C:\> New-IscsiVirtualDisk -Path "E:\temp\test.vhdx" -Size 10GB
  description: |-
    This example creates a fixed VHDX with 10GB in size.
  summary: ""
- title: EXAMPLE 2
  code: |-
    PS C:\> New-IscsiVirtualDisk -ParentPath "E:\temp\test.vhdx" -Path "E:\temp\child\diff.vhdx"
  description: |-
    This example creates a differencing VHDX, with the parent path E:\temp\test.vhdx and the differencing VHDX path is E:\temp\child\diff.vhdx.
  summary: ""
- title: EXAMPLE 3
  code: |-
    PS C:\> New-IscsiVirtualDisk -Path "E:\temp\test.vhdx" -Size 10GB -ComputerName "iscsisvr"
  description: |-
    This example creates a fixed VHDX with the size 10GB at E:\temp\test.vhdx on the computer named iscsisvr.
  summary: ""
- title: EXAMPLE 4
  code: |-
    PS C:\>New-IscsiVirtualDisk -Path ramdisk:test.vhdx -Size 20MB
  description: |-
    This example creates a VHDX with the size 20MB.
    This VHDX will not be saved, the VHDX will be lost if the wintarget service is restarted or the system is restarted.
  summary: ""
parameters:
- type: <xref href="UInt32" data-throw-if-not-resolved="False" />
  name: BlockSizeBytes
  description: |+
    Specifies the block size, in bytes, for the VHDX.
    For fixed VHDX, if the value of the **SizeBytes** parameter is less than 32 MB, the default size if 2 MB.
    Otherwise, the default value is 32 MB.
    For dynamic VHDX, the default size is 2 MB.
    For differencing VHDX, the default size is the parent **BlockSize**.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: ComputerName
  description: "Specifies the computer name, or IP address, of the remote computer, if this cmdlet is run on a remote computer. \r\n                         \r\nSpecifies the cluster resource group network name, or cluster node name, if this cmdlet is run on a cluster configuration.\r\n\r\nIf you do not specify a value for this parameter, the cmdlet uses the local computer.\r\n\r\n"
  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="PSCredential" data-throw-if-not-resolved="False" />
  name: Credential
  description: |+
    Specifies the credentials when connecting to a remote computer.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Description
  description: |+
    Specifies the description for the iSCSI virtual disk.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: DoNotClearData
  description: |+
    Indicates that the cmdlet does not clear the fixed VHDX.
    Because failing to clear data can reveal pre-existing data, we do not recommend this option.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="UInt32" data-throw-if-not-resolved="False" />
  name: LogicalSectorSizeBytes
  description: |+
    Specifies the logical sector size, in bytes, for the VHDX.
    The acceptable values for this parameter are: 512 and 4096.
    The default value is 512.

  defaultValue: "512"
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: ParentPath
  isRequired: true
  description: |+
    Specifies the parent virtual disk path if the VHDX is a differencing disk.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Path
  isRequired: true
  description: "Specifies the path of the VHDX file that is associated with the iSCSI virtual disk. \r\n                         \r\nIf the VHDX file path does not exist, then a new VHDX file will then be created. \r\n                         \r\nIf the virtual hard drive file path exists, then the server will return an error.\r\nUse the Import-IscsiVirtualDisk cmdlet to import existing virtual hard drives.\r\n\r\n"
  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: DevicePath
  parameterValueGroup: ""
- type: <xref href="UInt32" data-throw-if-not-resolved="False" />
  name: PhysicalSectorSizeBytes
  description: |+
    Specifies the physical sector size, in bytes, for the VHDX.
    The acceptable values for this parameter are: 512 and 4096.
    The default value is 4096.

  defaultValue: "4096"
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="UInt64" data-throw-if-not-resolved="False" />
  name: SizeBytes
  isRequired: true
  description: |+
    Specifies the size, in bytes, of the iSCSI virtual disk.

  defaultValue: None
  pipelineInput: true
  position: "1"
  aliases: Size
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: UseFixed
  isRequired: true
  description: |+
    Indicates that the cmdlet creates a fixed VHDX.

  defaultValue: None
  position: Named
  aliases: Fixed
  parameterValueGroup: ""
uid: IscsiTarget.New-IscsiVirtualDisk
name: New-IscsiVirtualDisk
description: "The **New-IscsiVirtualDisk** cmdlet creates a new iSCSI Virtual Hard Disk (VHDX) object with the specified file path and size.\r\nAfter the iSCSI VHDX object has been created, the virtual disk can be assigned to an iSCSI target.\r\nOnce a virtual disk has been assigned to a target, and an initiator connects to that target, the iSCSI initiator can then access the virtual disk after the initiator connects to the target.\r\n\r\nIf the virtual hard disk file path does not exist, then a new VHDX file will then be created. \r\n                       \r\nIf the VHDX file path exists, then the server will return an error.\r\nUse the Import-IscsiVirtualDisk cmdlet to import existing virtual hard disks.\r\n\r\nIf an error is displayed during the creation of the virtual disk, please check the following conditions: \r\n                       \r\n -- An absolute file path must be specified for the **Path** and **ParentPath** parameters. \r\n                       \r\n -- The virtual disk file name must have a .vhdx file extension. \r\n                       \r\n -- The VHDX file cannot be a network file, or be in a compressed, sparse, or transacted folder."
metadata:
  external help file: Microsoft.Iscsi.Target.Commands.dll-Help.xml
  Module Name: IscsiTarget
  ms.date: 10/29/2017
  online version: https://docs.microsoft.com/powershell/module/iscsitarget/new-iscsivirtualdisk?view=windowsserver2012r2-ps&wt.mc_id=ps-gethelp
  schema: 2.0.0
  title: New-IscsiVirtualDisk
