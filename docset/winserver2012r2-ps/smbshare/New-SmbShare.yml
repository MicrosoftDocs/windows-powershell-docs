### YamlMime:PowershellCmdlet
summary: |-
  Creates a new Server Message Block (SMB) share.
module: SmbShare
notes: ""
inputs:
- name: <xref href="None" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Management.Infrastructure.CimInstance#ROOT/Microsoft/Windows/SMB/MSFT_SmbShare" data-throw-if-not-resolved="False" />
  description: |-
    The `Microsoft.Management.Infrastructure.CimInstance` object is a wrapper class that displays Windows Management Instrumentation (WMI) objects.
    The path after the pound sign (`#`) provides the namespace and class name for the underlying WMI object.

    The MSFT_SmbShare object represents the new SMB share.
links:
- text: Get-SmbShare
  href: ./Get-SmbShare.yml
- text: Remove-SmbShare
  href: ./Remove-SmbShare.yml
- text: Set-SmbShare
  href: ./Set-SmbShare.yml
syntaxes:
- >-
  New-SmbShare [-Temporary] [-ContinuouslyAvailable <Boolean>] [-Description <String>]

   [-ConcurrentUserLimit <UInt32>] [-CATimeout <UInt32>] [-FolderEnumerationMode <FolderEnumerationMode>]

   [-CachingMode <CachingMode>] [-FullAccess <String[]>] [-ChangeAccess <String[]>] [-ReadAccess <String[]>]

   [-NoAccess <String[]>] [-SecurityDescriptor <String>] [-Path] <String> [-Name] <String>

   [[-ScopeName] <String>] [-EncryptData <Boolean>] [-CimSession <CimSession[]>] [-ThrottleLimit <Int32>]

   [-AsJob] [-WhatIf] [-Confirm] [<CommonParameters>]
examples:
- title: EXAMPLE 1
  code: |-
    PS C:\>New-SmbShare -Name VMSFiles -Path C:\ClusterStorage\Volume1\VMFiles -FullAccess Contoso\Administrator, Contoso\Contoso-HV1$
    Name                          ScopeName                     Path                          Description
    ----                          ---------                     ----                          -----------
    VMSFiles                      Contoso-SO                    C:\ClusterStorage\Volume1\...
  description: |-
    This example creates a new SMB share.
  summary: ""
- title: EXAMPLE 2
  code: |-
    PS C:\>New-SmbShare -Name Data -Path J:\Data -EncryptData $true
    Name                          ScopeName                     Path                          Description
    ----                          ---------                     ----                          -----------
    Data                          Contoso-FS                    J:\Data
  description: |-
    This example creates a new encrypted SMB share.
  summary: ""
parameters:
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: AsJob
  description: |+
    ps_cimcommon_asjob

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="CachingMode" data-throw-if-not-resolved="False" />
  name: CachingMode
  description: |+
    Specifies the caching mode of the offline files for the SMB share.
    There are five different caching modes:

     -- None: Prevents users from storing documents and programs offline.

     -- Manual: Allows users to identify the documents and programs they want to store offline.

     -- Programs: Automatically stores documents and programs offline.

     -- Documents: Automatically stores documents offline.

     -- BranchCache: Enables BranchCache and manual caching of documents on the shared folder.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: None, Manual, Documents, Programs, BranchCache, Unknown
- type: <xref href="UInt32" data-throw-if-not-resolved="False" />
  name: CATimeout
  description: |+
    Specifies the continuous availability timeout for the share.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: ChangeAccess
  description: |+
    Specifies which user will be granted modify permission to access the share.
    Multiple users can be specified by using a comma-separated list.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="CimSession" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: CimSession
  description: |+
    Runs the cmdlet in a remote session or on a remote computer.
    Enter a computer name or a session object, such as the output of a New-CimSessionhttp://go.microsoft.com/fwlink/p/?LinkId=227967 or Get-CimSessionhttp://go.microsoft.com/fwlink/p/?LinkId=227966 cmdlet.
    The default is the current session on the local computer.

  defaultValue: None
  position: Named
  aliases: Session
  parameterValueGroup: ""
- type: <xref href="UInt32" data-throw-if-not-resolved="False" />
  name: ConcurrentUserLimit
  description: |+
    Specifies the maximum number of concurrently connected users that the new SMB share may accommodate.
    If this parameter is set to zero (0), then the number of users is unlimited.
    The default value is zero (0).

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before running the cmdlet.

  defaultValue: "False"
  position: Named
  aliases: cf
  parameterValueGroup: ""
- type: <xref href="Boolean" data-throw-if-not-resolved="False" />
  name: ContinuouslyAvailable
  description: |+
    Indicates that the share is continuously available.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Description
  description: |+
    Specifies an optional description of the new SMB share.
    A description of the share is displayed by running the Get-SmbShare cmdlet.
    The description may not contain more than 256 characters.
    The default value no description, or an empty description

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Boolean" data-throw-if-not-resolved="False" />
  name: EncryptData
  description: |+
    Indicates that the share is encrypted.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="FolderEnumerationMode" data-throw-if-not-resolved="False" />
  name: FolderEnumerationMode
  description: |+
    Specifies which files and folders in the new SMB share are visible to users.
    The acceptable values for this parameter are:

     -- AccessBased: SMB will not display the files and folders for a share to a user unless that user has rights to access the files and folders.
    By default, access-based enumeration is disabled for new SMB shares.

     -- Unrestricted: SMB will display files and folders to a user even when the user does not have permission to access the items.

    The default value is Unrestricted.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: AccessBased, Unrestricted
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: FullAccess
  description: |+
    Specifies which accounts are granted full permission to access the share.
    Use a comma-separated list to specify multiple accounts.
    An account may not be specified more than once in the FullAccess, ChangeAccess, or ReadAccess parameter lists, but may be specified once in the FullAccess, ChangeAccess, or ReadAccess parameter list and once in the NoAccess parameter list.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Name
  isRequired: true
  description: |+
    Specifies a name for the new SMB share.
    The name may be composed of any valid file name characters, but must be less than 80 characters in length.
    The names `pipe` and `mailslot` are reserved for use by the computer.

  defaultValue: None
  pipelineInput: true
  position: "1"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: NoAccess
  description: |+
    Specifies which accounts are denied access to the share.
    Multiple accounts can be specified by supplying a comma-separated list.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Path
  isRequired: true
  description: |+
    Specifies the path to the location of the folder to share.
    The path must be fully qualified; relative paths or paths that contain wildcard characters are not permitted.

  defaultValue: None
  pipelineInput: true
  position: "2"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: ReadAccess
  description: |+
    Specifies which user is granted read permission to access the share.
    Multiple users can be specified by supplying a comma-separated list.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: ScopeName
  description: |+
    Specifies the scope name of the share.

  defaultValue: None
  pipelineInput: true
  position: "3"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: SecurityDescriptor
  description: |+
    Specifies the security descriptor for the SMB share in string format.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: Temporary
  description: |+
    Specifies the lifetime of the new SMB share.
    A temporary share does not persist beyond the next reboot of the computer.
    By default, new SMB shares are persistent, and non-temporary.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Int32" data-throw-if-not-resolved="False" />
  name: ThrottleLimit
  description: |+
    Specifies the maximum number of concurrent operations that can be established to run the cmdlet.
    If this parameter is omitted or a value of `0` is entered, then Windows PowerShell® calculates an optimum throttle limit for the cmdlet based on the number of CIM cmdlets that are running on the computer.
    The throttle limit applies only to the current cmdlet, not to the session or to the computer.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Shows what would happen if the cmdlet runs.
    The cmdlet is not run.

    NOTE: The WhatIf switch does not work with this cmdlet.

  defaultValue: "False"
  position: Named
  aliases: wi
  parameterValueGroup: ""
uid: SmbShare.New-SmbShare
name: New-SmbShare
description: |-
  The **New-SMBShare** cmdlet exposes a file system folder to remote clients as a new Server Message Block (SMB) share.

  To delete a share that was created by this cmdlet, use the Remove-SMBShare cmdlet.
metadata:
  external help file: SmbShare.cdxml-help.xml
  Module Name: SmbShare
  ms.date: 10/29/2017
  online version: https://docs.microsoft.com/powershell/module/smbshare/new-smbshare?view=windowsserver2012r2-ps&wt.mc_id=ps-gethelp
  schema: 2.0.0
  title: New-SmbShare
