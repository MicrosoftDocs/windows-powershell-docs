### YamlMime:PowershellCmdlet
summary: |-
  Updates the cache of the service for a particular provider and associated child objects.
module: Storage
notes: |-
  * When used in Failover Cluster, cmdlets from the Storage module operate on cluster level (all servers in the cluster).
inputs:
- name: <xref href="Microsoft.Management.Infrastructure.CimInstance#ROOT/Microsoft/Windows/Storage/MSFT_StorageSubsystem" data-throw-if-not-resolved="False" />
  description: |-
    You can pipe an MSFT_StorageSubsystem object to the *StorageSubsystem* parameter to perform the update on the storage provider for the specified subsystem.
- name: <xref href="Microsoft.Management.Infrastructure.CimInstance#ROOT/Microsoft/Windows/Storage/MSFT_StorageProvider" data-throw-if-not-resolved="False" />
  description: |-
    You can pipe an MSFT_StorageProvider object to the *InputObject* parameter to perform the update on the specified storage provider.
outputs:
- name: <xref href="Microsoft.Management.Infrastructure.CimInstance#ROOT/Microsoft/Windows/Storage/MSFT_StorageProvider" data-throw-if-not-resolved="False" />
  description: |-
    By default the **Update-StorageProviderCache** cmdlet does not return any objects.
    If you specify the *PassThru* parameter, this cmdlet returns an object representing the storage provider it updated.
links:
- text: Get-StoragePool
  href: ./Get-StoragePool.yml
syntaxes:
- >-
  Update-StorageProviderCache [[-Name] <String[]>] [-Manufacturer <String[]>] [-DiscoveryLevel <DiscoveryLevel>]

   [-RootObject <PSReference>] [-CimSession <CimSession[]>] [-ThrottleLimit <Int32>] [-AsJob] [-PassThru]

   [<CommonParameters>]
- >-
  Update-StorageProviderCache [-UniqueId <String[]>] [-DiscoveryLevel <DiscoveryLevel>]

   [-RootObject <PSReference>] [-CimSession <CimSession[]>] [-ThrottleLimit <Int32>] [-AsJob] [-PassThru]

   [<CommonParameters>]
- >-
  Update-StorageProviderCache [-Manufacturer <String[]>] [-URI <Uri[]>] [-DiscoveryLevel <DiscoveryLevel>]

   [-RootObject <PSReference>] [-CimSession <CimSession[]>] [-ThrottleLimit <Int32>] [-AsJob] [-PassThru]

   [<CommonParameters>]
- >-
  Update-StorageProviderCache [-StorageSubSystem <CimInstance>] [-DiscoveryLevel <DiscoveryLevel>]

   [-RootObject <PSReference>] [-CimSession <CimSession[]>] [-ThrottleLimit <Int32>] [-AsJob] [-PassThru]

   [<CommonParameters>]
- >-
  Update-StorageProviderCache -InputObject <CimInstance[]> [-DiscoveryLevel <DiscoveryLevel>]

   [-RootObject <PSReference>] [-CimSession <CimSession[]>] [-ThrottleLimit <Int32>] [-AsJob] [-PassThru]

   [<CommonParameters>]
examples:
- title: 'Example 1: Perform a Full update of all objects'
  code: |-
    PS C:\>Update-StorageProviderCache -DiscoveryLevel Full
  description: |-
    This example performs a Full update of the storage provider cache on all accessible storage providers, rescanning all associated physical disks and reporting the state.
    This operation can be extremely time intensive in large or enterprise environments; instead use parameters to scope the update.
  summary: ""
- title: 'Example 2: Update PhysicalDisk objects for a particular storage provider'
  code: |-
    PS C:\>Update-StorageProviderCache -StorageSubSystem (Get-StorageSubSystem -FriendlyName "StorageArray*") -DiscoveryLevel Level3
  description: |-
    This example uses the *StorageSubsystem* parameter in association with the **Get-StorageSubSystem** cmdlet to get a particular storage subsystem and then perform a Level3 update on its associated storage provider, discovering all associated PhysicalDisk objects.
  summary: ""
- title: 'Example 3: Update all objects for a specific storage pool'
  code: |-
    PS C:\>Update-StorageProviderCache -Name "StorageArray" -RootObject ([ref](Get-StoragePool "Storage pool"))
  description: |-
    This example uses the *Name* parameter to specify the storage provider to update, and uses the *RootObject* parameter to specify the specific storage pool for which to update objects.
    Because *RootObject* takes PSReference objects as input, you need to prepend the object call with `\[ref\]` to get a reference to the object instead of the object itself.
  summary: ""
parameters:
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: AsJob
  description: |+
    Runs the cmdlet as a background job. Use this parameter to run commands that take a long time to complete.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="CimSession" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: CimSession
  description: |+
    Runs the cmdlet in a remote session or on a remote computer.
    Enter a computer name or a session object, such as the output of a [New-CimSession](https://go.microsoft.com/fwlink/p/?LinkId=227967) or [Get-CimSession](https://go.microsoft.com/fwlink/p/?LinkId=227966) cmdlet.
    The default is the current session on the local computer.

  defaultValue: None
  position: Named
  aliases: Session
  parameterValueGroup: ""
- type: <xref href="DiscoveryLevel" data-throw-if-not-resolved="False" />
  name: DiscoveryLevel
  description: |+
    Defines the level (or depth) of discovery that should be performed.
    Increasing levels are cumulative; the storage providers will discover objects starting from Level0 and continuing to the highest level specified.
    Acceptable values are:

    Full, which discovers all objects on all accessible storage providers.
    This is the same as a Level3 discovery.

    Level0, which discovers storage provider and storage subsystem objects.

    Level1, which performs a Level0 discovery and then discovers storage pools, resiliency settings, target ports, target portals, and initiator identifiers.

    Level2, which performs a Level1 discovery and then discovers virtual disk and masking set objects.

    Level3, which performs a Level2 discovery and then discovers physical disk objects.
    This is the same as a Full discovery.

    All storage providers perform a Level0 or higher level discovery when loaded by Windows.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: Level0, Level1, Level2, Level3, Full
- type: <xref href="CimInstance" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: InputObject
  isRequired: true
  description: |+
    Specifies the input object that is used in a pipeline command.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: Manufacturer
  description: |+
    Specifies the storage provider cache to update by manufacturer name.
    Enter a manufacturer string, or use wildcard characters to enter a pattern.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: Name
  description: |+
    Specifies the name of the storage provider cache to update.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: PassThru
  description: |+
    Specifies that the cmdlet should output an object representing the storage provider it updated.
    By default, this cmdlet does not generate any output.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="PSReference" data-throw-if-not-resolved="False" />
  name: RootObject
  description: |+
    Specifies a reference to the object from which you want to begin discovering associated objects.
    When the DiscoveryLevel parameter is not specified, well-defined actions will be taken depending on the type of object reference specified:

    StorageSubsystem: All associated objects will be discovered.

    StoragePool: The pool, along with any associated resiliency settings, virtual disks, and physical disks will be discovered.

    MaskingSet: The masking set, along with any associated target ports, initiator identifiers, and virtual disks will be discovered.

    For all other objects, only the specified object will be discovered or refreshed.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="CimInstance" data-throw-if-not-resolved="False" />
  name: StorageSubSystem
  description: |+
    Updates all storage subsystems managed by the storage provider associated with the StorageSubsystem object you specify.
    Enter a StorageSubsytem CIM object, which is exposed by the Get-StorageSubSystem cmdlet.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Int32" data-throw-if-not-resolved="False" />
  name: ThrottleLimit
  description: |+
    Specifies the maximum number of concurrent operations that can be established to run the cmdlet.
    If this parameter is omitted or a value of `0` is entered, then Windows PowerShellÂ® calculates an optimum throttle limit for the cmdlet based on the number of CIM cmdlets that are running on the computer.
    The throttle limit applies only to the current cmdlet, not to the session or to the computer.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: UniqueId
  description: |+
    Specifies the ID of the storage provider cache to update.
    Type one or more IDs, with each ID enclosed in quotes, and multiple IDs separated by commas.
    The ID persists through restarts.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: Id
  parameterValueGroup: ""
- type: <xref href="Uri" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: URI
  description: |+
    Specifies the URI of the storage provider whose cache should be updated.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: Storage.Update-StorageProviderCache
name: Update-StorageProviderCache
description: |-
  The **Update-StorageProviderCache** cmdlet updates the cache of the service for a particular provider and associated child objects.

  Note: Using the Full value for the *DiscoveryLevel* parameter without using additional parameters to limit the scope to particular storage providers or storage subsystems causes all accessible storage providers to enumerate and report all state information, which can be extremely time intensive in large environments.
metadata:
  description: Use this topic to help manage Windows and Windows Server technologies with Windows PowerShell.
  external help file: StorageProvider.cdxml-help.xml
  Module Name: Storage
  ms.date: 12/20/2016
  online version: https://docs.microsoft.com/powershell/module/storage/update-storageprovidercache?view=windowsserver2019-ps&wt.mc_id=ps-gethelp
  schema: 2.0.0
  title: Update-StorageProviderCache
