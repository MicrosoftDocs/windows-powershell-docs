### YamlMime:PowershellCmdlet
summary: |-
  Creates an access point for a remote file share.
module: Storage
notes: |-
  * When used in Failover Cluster, cmdlets from the Storage module operate on cluster level (all servers in the cluster).
outputs:
- name: <xref href="MSFT_FileShare" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Debug-FileShare
  href: ./Debug-FileShare.yml
- text: Get-FileShare
  href: ./Get-FileShare.yml
- text: Remove-FileShare
  href: ./Remove-FileShare.yml
- text: Set-FileShare
  href: ./Set-FileShare.yml
syntaxes:
- >-
  New-FileShare -FileServerFriendlyName <String[]> -Name <String> [-Description <String>]

   -SourceVolume <CimInstance> [-RelativePathName <String>] [-ContinuouslyAvailable <Boolean>]

   [-EncryptData <Boolean>] [-Protocol <FileSharingProtocol>] [-CimSession <CimSession[]>]

   [-ThrottleLimit <Int32>] [-AsJob] [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  New-FileShare -FileServerUniqueId <String[]> -Name <String> [-Description <String>] -SourceVolume <CimInstance>

   [-RelativePathName <String>] [-ContinuouslyAvailable <Boolean>] [-EncryptData <Boolean>]

   [-Protocol <FileSharingProtocol>] [-CimSession <CimSession[]>] [-ThrottleLimit <Int32>] [-AsJob] [-WhatIf]

   [-Confirm] [<CommonParameters>]
- >-
  New-FileShare -InputObject <CimInstance[]> -Name <String> [-Description <String>] -SourceVolume <CimInstance>

   [-RelativePathName <String>] [-ContinuouslyAvailable <Boolean>] [-EncryptData <Boolean>]

   [-Protocol <FileSharingProtocol>] [-CimSession <CimSession[]>] [-ThrottleLimit <Int32>] [-AsJob] [-WhatIf]

   [-Confirm] [<CommonParameters>]
examples:
- title: 'Example 1: Create an SMB file share'
  code: |-
    PS C:\>$Pool = Get-StoragePool -FriendlyName "clusteredpool"
    PS C:\> $Volume = $Pool | New-Volume -FriendlyName "myvol" -UseMaximumSize $True
    PS C:\> New-FileShare -Name "Docs" -FileServerFriendlyName "scaleout-clus" -SourceVolume $Volume -IsContinuouslyAvailable $True -Protocol SMB
  description: |-
    The first command gets the specified storage pool, and then stores it in the $Pool variable.

    The second command creates a volume using the storage pool in $Pool, and then stores it in the $Volume variable.

    The third command creates a continuously available SMB file share using the volume in $SourceVolume.
  summary: ""
parameters:
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: AsJob
  description: |+
    Runs the cmdlet as a background job. Use this parameter to run commands that take a long time to complete.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="CimSession" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: CimSession
  description: |+
    Runs the cmdlet in a remote session or on a remote computer.
    Enter a computer name or a session object, such as the output of a [New-CimSession](https://go.microsoft.com/fwlink/p/?LinkId=227967) or [Get-CimSession](https://go.microsoft.com/fwlink/p/?LinkId=227966) cmdlet.
    The default is the current session on the local computer.

  defaultValue: None
  position: Named
  aliases: Session
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before running the cmdlet.

  defaultValue: "False"
  position: Named
  aliases: cf
  parameterValueGroup: ""
- type: <xref href="Boolean" data-throw-if-not-resolved="False" />
  name: ContinuouslyAvailable
  description: |+
    Indicates whether the file share is continuously available.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Description
  description: |+
    Specifies a user-friendly description of the file share.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Boolean" data-throw-if-not-resolved="False" />
  name: EncryptData
  description: |+
    Indicates whether to encrypt the data on transport.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: FileServerFriendlyName
  isRequired: true
  description: |+
    Specifies the name of the file server to host the file share.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: FileServerUniqueId
  isRequired: true
  description: |+
    Specifies the unique ID of the file server.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: Id
  parameterValueGroup: ""
- type: <xref href="CimInstance" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: InputObject
  isRequired: true
  description: |+
    Specifies the input object that is used in a pipeline command.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Name
  isRequired: true
  description: |+
    Specifies the name of the file share to create.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="FileSharingProtocol" data-throw-if-not-resolved="False" />
  name: Protocol
  description: |+
    Specifies the file sharing protocol.
    The acceptable values for this parameter are:

    - NFS
    - SMB

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: NFS, SMB
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: RelativePathName
  description: |+
    Specifies the relative path.
    Specify this parameter if the path for the new file share is not the root of the volume.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="CimInstance" data-throw-if-not-resolved="False" />
  name: SourceVolume
  isRequired: true
  description: |+
    Specifies the source volume.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Int32" data-throw-if-not-resolved="False" />
  name: ThrottleLimit
  description: |+
    Specifies the maximum number of concurrent operations that can be established to run the cmdlet.
    If this parameter is omitted or a value of `0` is entered, then Windows PowerShellÂ® calculates an optimum throttle limit for the cmdlet based on the number of CIM cmdlets that are running on the computer.
    The throttle limit applies only to the current cmdlet, not to the session or to the computer.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Shows what would happen if the cmdlet runs.
    The cmdlet is not run.

  defaultValue: "False"
  position: Named
  aliases: wi
  parameterValueGroup: ""
uid: Storage.New-FileShare
name: New-FileShare
description: |-
  The **New-FileShare** cmdlet creates an access point for a remote file share.

  The file share that this cmdlet creates represents a Server Message Block (SMB) or Network File System (NFS) share, which is on top of a MSFT_Volume.
metadata:
  description: Use this topic to help manage Windows and Windows Server technologies with Windows PowerShell.
  external help file: FileServer.cdxml-help.xml
  Module Name: Storage
  ms.date: 12/20/2016
  online version: https://docs.microsoft.com/powershell/module/storage/new-fileshare?view=windowsserver2022-ps&wt.mc_id=ps-gethelp
  schema: 2.0.0
  title: New-FileShare
