### YamlMime:PowershellCmdlet
summary: |-
  Creates a new masking set.
module: Storage
notes: |-
  * When used in Failover Cluster, cmdlets from the Storage module operate on cluster level (all servers in the cluster).
inputs:
- name: <xref href="Microsoft.Management.Infrastructure.CimInstance#ROOT/Microsoft/Windows/Storage/Msft_StorageSubsystem" data-throw-if-not-resolved="False" />
  description: |-
    You can pipe a StorageSubsystem object to the *InputObject* parameter.
outputs:
- name: <xref href="Microsoft.Management.Infrastructure.CimInstance#ROOT/Microsoft/Windows/Storage/MSFT_MaskingSet" data-throw-if-not-resolved="False" />
  description: |-
    This cmdlet outputs an object representing the newly created masking set.
links:
- text: Get-MaskingSet
  href: ./Get-MaskingSet.yml
- text: Get-InitiatorPort
  href: ./Get-InitiatorPort.yml
- text: Get-TargetPort
  href: ./Get-TargetPort.yml
- text: Get-VirtualDisk
  href: ./Get-VirtualDisk.yml
- text: Remove-MaskingSet
  href: ./Remove-MaskingSet.yml
- text: Rename-MaskingSet
  href: ./Rename-MaskingSet.yml
syntaxes:
- >-
  New-MaskingSet [-StorageSubSystemFriendlyName] <String[]> [-FriendlyName <String>]

   [-VirtualDiskNames <String[]>] [-InitiatorAddresses <String[]>] [-TargetPortAddresses <String[]>]

   [-DeviceNumbers <String[]>] [-DeviceAccesses <DeviceAccess[]>] [-HostType <HostMode>]

   [-CimSession <CimSession[]>] [-ThrottleLimit <Int32>] [-AsJob] [<CommonParameters>]
- >-
  New-MaskingSet -StorageSubSystemUniqueId <String[]> [-FriendlyName <String>] [-VirtualDiskNames <String[]>]

   [-InitiatorAddresses <String[]>] [-TargetPortAddresses <String[]>] [-DeviceNumbers <String[]>]

   [-DeviceAccesses <DeviceAccess[]>] [-HostType <HostMode>] [-CimSession <CimSession[]>]

   [-ThrottleLimit <Int32>] [-AsJob] [<CommonParameters>]
- >-
  New-MaskingSet -StorageSubSystemName <String[]> [-FriendlyName <String>] [-VirtualDiskNames <String[]>]

   [-InitiatorAddresses <String[]>] [-TargetPortAddresses <String[]>] [-DeviceNumbers <String[]>]

   [-DeviceAccesses <DeviceAccess[]>] [-HostType <HostMode>] [-CimSession <CimSession[]>]

   [-ThrottleLimit <Int32>] [-AsJob] [<CommonParameters>]
- >-
  New-MaskingSet -InputObject <CimInstance[]> [-FriendlyName <String>] [-VirtualDiskNames <String[]>]

   [-InitiatorAddresses <String[]>] [-TargetPortAddresses <String[]>] [-DeviceNumbers <String[]>]

   [-DeviceAccesses <DeviceAccess[]>] [-HostType <HostMode>] [-CimSession <CimSession[]>]

   [-ThrottleLimit <Int32>] [-AsJob] [<CommonParameters>]
examples:
- title: 'Example 1: Create a masking set'
  code: |-
    PS C:\> $StorageSubsystem = Get-StorageSubsystem
    PS C:\> $VirtualDisks = Get-VirtualDisk -Name "Virtual01,Virtual02"
    PS C:\> $Initiator = Get-InitiatorPort
    PS C:\> $Target = Get-TargetPort
    PS C:\> New-MaskingSet -StorageSubsystemFriendlyName $StorageSubsystem.FriendlyName -VirtualDiskNames $VirtualDisks.Name -FriendlyName "MyFirstMaskingSet" -InitiatorAddresses $Initiator.NodeAddress -TargetPortAddresses $Target.PortAddress
  description: |-
    This example collects the necessary information and then creating a new masking set to expose the virtual disks that have the friendly names VirtualDisk01 and VirtualDisk02 to the local machine.
  summary: ""
parameters:
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: AsJob
  description: |+
    Runs the cmdlet as a background job. Use this parameter to run commands that take a long time to complete.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="CimSession" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: CimSession
  description: |+
    Runs the cmdlet in a remote session or on a remote computer.
    Enter a computer name or a session object, such as the output of a [New-CimSession](https://go.microsoft.com/fwlink/p/?LinkId=227967) or [Get-CimSession](https://go.microsoft.com/fwlink/p/?LinkId=227966) cmdlet.
    The default is the current session on the local computer.

  defaultValue: None
  position: Named
  aliases: Session
  parameterValueGroup: ""
- type: <xref href="DeviceAccess" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: DeviceAccesses
  description: |+
    Specifies the way in which initiators can access the virtual disk(s) that are part of this masking set.
    You must specify a **DeviceAccesses** value for each virtual disk specified by the *VirtualDiskNames* parameter.
    Allowed values are NoAccess, ReadOnly, ReadWrite, and Unknown.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: Unknown, ReadWrite, ReadOnly, NoAccess
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: DeviceNumbers
  description: |+
    Specifies the device numbers for one or more virtual disks.
    Some storage providers do not use device numbers.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: FriendlyName
  description: |+
    Specifies the friendly name for the new masking set.

  defaultValue: None
  position: Named
  aliases: MaskingSetFriendlyName
  parameterValueGroup: ""
- type: <xref href="HostMode" data-throw-if-not-resolved="False" />
  name: HostType
  description: |+
    Specifies the host operating system or other host environmental factors that may influence the behavior that the storage system should have when showing a virtual disk to an initiator.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: Unknown, Other, Standard, Solaris, HPUX, OpenVMS, Tru64, Netware, Sequent, AIX, DGUX, Dynix, Irix, CiscoISCSIStorageRouter, Linux, MicrosoftWindows, OS400, TRESPASS, HIUX, VMwareESXi, MicrosoftWindowsServer2008, MicrosoftWindowsServer2003
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: InitiatorAddresses
  description: |+
    Specifies the initiator addresses.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="CimInstance" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: InputObject
  isRequired: true
  description: |+
    Specifies the input object that is used in a pipeline command.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: StorageSubSystemFriendlyName
  isRequired: true
  description: |+
    Specifies the friendly name of the storage subsystem.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: StorageSubSystemName
  isRequired: true
  description: |+
    Specifies the name of the storage subsystem provided by the Storage Management.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: StorageSubSystemUniqueId
  isRequired: true
  description: |+
    Specifies the UniqueID of the storage subsystem to use.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: StorageSubsystemId
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: TargetPortAddresses
  description: |+
    Specifies one or more target port addresses.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Int32" data-throw-if-not-resolved="False" />
  name: ThrottleLimit
  description: |+
    Specifies the maximum number of concurrent operations that can be established to run the cmdlet.
    If this parameter is omitted or a value of `0` is entered, then Windows PowerShellÂ® calculates an optimum throttle limit for the cmdlet based on the number of CIM cmdlets that are running on the computer.
    The throttle limit applies only to the current cmdlet, not to the session or to the computer.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: VirtualDiskNames
  description: |+
    Specifies one or more virtual disk names to include in the masking set.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: Storage.New-MaskingSet
name: New-MaskingSet
description: |-
  The **New-MaskingSet** cmdlet creates a new masking set.
  Masking sets allow management of groups of TargetPort, VirtualDisk, and InitiatorID objects to manage access to virtual disks, either for individual computers or multiple computers in the case of a Failover Cluster configuration.
  Once a masking set is created, adding or removing a virtual disk grants or removes access to all resources in the masking set.
  Adding or removing initiator addresses can show or hide the virtual disks in this masking set to hosts.

  ps_storage_spacesubsystem_not_remark
metadata:
  description: Use this topic to help manage Windows and Windows Server technologies with Windows PowerShell.
  external help file: StorageSubSystem.cdxml-help.xml
  Module Name: Storage
  ms.date: 12/20/2016
  online version: https://docs.microsoft.com/powershell/module/storage/new-maskingset?view=windowsserver2022-ps&wt.mc_id=ps-gethelp
  schema: 2.0.0
  title: New-MaskingSet
